# Supabase database URL
SUPABASE_URL=
# Supabase API ключ с правами сервиса для административных операций
SUPABASE_SERVICE_ROLE_KEY=
# Токен Telegram бота для подключения к API Telegram
TELEGRAM_BOT_TOKEN=
# Telegram ID/чат для уведомлений о заказах (по умолчанию 314009331)
TELEGRAM_ADMIN_ID=314009331
# (Опционально) URL mini app, чтобы бот мог показать кнопку "Открыть mini app" в /start
WEBAPP_URL=
# Часовой пояс для отображения даты заказа (createdAt из mini app)
ORDER_TIMEZONE=Europe/Moscow
# Порт, на котором запускается сервер
PORT=3000
# Размер батча для массовых операций insert/update в основную таблицу
UPSERT_BATCH_SIZE=200
# Размер батча для массовых операций insert/update в таблицу продуктов
UPSERT_PRODUCT_BATCH_SIZE=50
# Размер батча для легковесных обновлений (price/stock)
UPSERT_DELTA_BATCH_SIZE=200
# Количество повторных попыток при ошибке в операциях upsert
UPSERT_RETRIES=5
# Задержка в миллисекундах перед следующей попыткой повтора
UPSERT_RETRY_MS=800
# Максимальная задержка между повторами (мс)
UPSERT_RETRY_MAX_MS=8000
# Базовая задержка при 429 (мс)
RATE_LIMIT_RETRY_MS=1000
# Максимальная задержка при 429 (мс)
RATE_LIMIT_MAX_DELAY_MS=16000
# Таймаут запросов к Supabase (мс). 0 = без таймаута
SUPABASE_REQUEST_TIMEOUT_MS=20000
# Джиттер для повторов (мс)
RETRY_JITTER_MS=250
# Задержка между батчами (мс)
BATCH_DELAY_MS=1000
# Минимальная/максимальная задержка между батчами (мс)
BATCH_DELAY_MIN_MS=500
BATCH_DELAY_MAX_MS=1500
# Джиттер между батчами (мс)
BATCH_JITTER_MS=100
# Параллельные батчи
BATCH_CONCURRENCY=3
# Минимальная параллельность при адаптации
BATCH_MIN_CONCURRENCY=1
# Сколько успешных групп нужно для увеличения параллельности
BATCH_RAMP_GROUPS=3
# Локальные пути к YML/XML файлам поставщика (кэш)
SUPPLIER_FULL_YML_PATH=tmp/full_catalog.yml
SUPPLIER_PRICE_YML_PATH=tmp/price_update.yml
SUPPLIER_STOCK_YML_PATH=tmp/stock_update.yml
# (Legacy) старый единый файл, если используется
SUPPLIER_YML_PATH=tmp/supplier.yml

# URL для загрузки файлов поставщика
SUPPLIER_FULL_YML_URL=
SUPPLIER_PRICE_YML_URL=
SUPPLIER_STOCK_YML_URL=
# (Legacy) старый единый URL
SUPPLIER_YML_URL=

# Какую цену брать как base_price (скидки считаются от нее)
SUPPLIER_BASE_PRICE_TYPE=Розничная цена
# Если в остатках несколько складов: можно выбрать один (иначе суммируем)
SUPPLIER_STOCK_STORE=
# Коэффициент для цены (1 = без наценки)
PRICE_MULTIPLIER=1
# Сохранять скачанный YML в SUPPLIER_YML_PATH (true/false)
SUPPLIER_YML_SAVE=
# Флаг для очистки данных перед импортом (true/false)
IMPORT_WIPE=
# Ночной full-импорт (локальное время контейнера, HH:MM)
IMPORT_FULL_AT=03:00
# Интервал легковесных обновлений price/stock (мин)
IMPORT_DELTA_INTERVAL_MINUTES=20
# (Legacy) старый интервал (не используется в текущем расписании)
IMPORT_INTERVAL_MINUTES=30
# Вайп только при первом запуске расписания (true/false)
IMPORT_WIPE_ON_START=

# Токен доступа МойСклад (Remap 1.2). Нужен для команды связки контрагентов.
MOYSKLAD_TOKEN=
